<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.mycom.project.apt.dao.AptDao">
	<!-- limit, offset -->
	<select id="aptList" parameterType="map" resultType="com.mycom.project.apt.dto.AptDto">
		select no, dong, AptName, code, dealAmount, buildYear, dealYear, dealMonth, dealDay, area, floor, jibun, type, house_no
            from housedeal
            order by no desc
            limit #{limit} offset #{offset}
	</select>
	<select id="aptListTotalCount" resultType="int">
		select count(*) from housedeal
	</select>
	
	<!-- searchWord -->
	<select id="aptListSearchWord" parameterType="map" resultType="com.mycom.project.apt.dto.AptDto">
		select no, dong, AptName, code, dealAmount, buildYear, dealYear, dealMonth, dealDay, area, floor, jibun, type, house_no
            from housedeal
            where AptName like concat('%', #{searchWord}, '%')
            order by no desc
            limit #{limit} offset #{offset}
	</select>
	<select id="aptListSearchWordTotalCount" parameterType="string" resultType="int">
		select count(*) from housedeal 
			where AptName like concat('%', #{searchWord},'%')
	</select>
	
	<!-- Detail -->
	<select id="aptDetail" parameterType="int" resultType="com.mycom.project.apt.dto.AptDto">
		select no, dong, AptName, code, dealAmount, buildYear, dealYear, dealMonth, dealDay, area, floor, jibun, type, house_no
            from housedeal
            where no = #{no}
	</select>
	
	<select id="addressDetail" parameterType="map" resultType="com.mycom.project.apt.dto.DongDto">
		select code, name, city_code, city_name, gugun_code, gugun_name
		from dong_code
		where gugun_code = #{code}
		and name = #{name}
	</select>
	
	<select id="aptLatLng" parameterType="int" resultType="com.mycom.project.apt.dto.AptInfoDto">
		select lat, lng
		from houseinfo
		where no = #{houseNo}
	</select>
	
</mapper>